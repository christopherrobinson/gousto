---
import { type NutritionalInformationProps } from '@/types/NutritionalInformation';

const { perPortion } = Astro.props as NutritionalInformationProps;
const perPortionValues = filterNumericValues(perPortion);
---

{perPortion && (Object.keys(perPortionValues).length > 0) && (
  <div class="py-8">
    <h2 class="font-semibold  font-serif  mb-2  text-3xl">Nutritional information</h2>
    <p class="mb-8">Nutritional information only applies to ingredients supplied by Gousto.</p>
    <div class="mb-8  overflow-hidden  rounded-md  sm:flex">
      <div class="bg-primary-600  items-center  p-4  text-center  text-white  w-full  sm:text-left  sm:w-auto  md:p-8">
        per<br class="hidden  sm:block"> serving
      </div>
      <div class={`bg-secondary-100  gap-4  grid  grid-cols-3  items-center  justify-around  p-4  text-center  text-sm  w-full  sm:grid-cols-6  md:p-8`}>
        {perPortionValues.energy_kcal && (
          <div>
            <div class="font-medium"><span class="text-2xl">{perPortionValues.energy_kcal.toLocaleString()}</span>kcal</div>
            <div>Energy</div>
          </div>
        )}
        {perPortionValues.fat_mg && (
          <div>
            <div class="font-medium"><span class="text-2xl">{formatMilligramsToGrams(perPortionValues.fat_mg)}</span>g</div>
            <div>Fat</div>
          </div>
        )}
        {perPortionValues.carbs_mg && (
          <div>
            <div class="font-medium"><span class="text-2xl">{formatMilligramsToGrams(perPortionValues.carbs_mg)}</span>g</div>
            <div>Carbohydrate</div>
          </div>
        )}
        {perPortionValues.fibre_mg && (
          <div>
            <div class="font-medium"><span class="text-2xl">{formatMilligramsToGrams(perPortionValues.fibre_mg)}</span>g</div>
            <div>Fibre</div>
          </div>
        )}
        {perPortionValues.protein_mg && (
          <div>
            <div class="font-medium"><span class="text-2xl">{formatMilligramsToGrams(perPortionValues.protein_mg)}</span>g</div>
            <div>Protein</div>
          </div>
        )}
        {perPortionValues.salt_mg && (
          <div>
            <div class="font-medium"><span class="text-2xl">{formatMilligramsToGrams(perPortionValues.salt_mg)}</span>g</div>
            <div>Salt</div>
          </div>
        )}
      </div>
    </div>
    <p>The cooking process and additional ingredients added at home (listed under &ldquo;You'll also need&rdquo;) will affect total values.</p>
  </div>
)}
